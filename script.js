class StudyTimer {
    constructor() {
        this.studyTime = 0;
        this.nextAlarmTime = 0;
        this.shortBreakTime = 0;
        this.longBreakTime = 0;
        this.quoteTime = 120; // 2åˆ†é˜æ›ä¸€æ¬¡åè¨€
        this.isRunning = false;
        this.isShortBreak = false;
        this.isLongBreak = false;
        this.alarmActive = false;
        this.maxAlarmTime = 0;
        this.customAudio = null;

        this.quotes = [
            "ä¸€æ—¥ä¹‹è¨ˆåœ¨æ–¼æ™¨ï¼Œä¸€å¹´ä¹‹è¨ˆåœ¨æ–¼æ˜¥ï¼Œä¸€ç”Ÿä¹‹è¨ˆåœ¨æ–¼å‹¤ã€‚",
            "ä¸€å¥æº«æš–çš„è©±ï¼Œå°±å‘å¾€åˆ¥äººèº«ä¸Šç‘é¦™æ°´ï¼Œè‡ªå·±ä¹Ÿæœƒæ²¾åˆ°å…©ä¸‰æ»´ã€‚",
            "ä¸€æ—¦æˆ‘å’Œæ•µäººäº¤ä¸Šäº†æœ‹å‹ï¼Œä¹Ÿå°±æ“Šæ•—äº†æ•µäººã€‚",
            "ä¸€å®šè¦æŠ“ç·Šæ¯ä¸€ç§’é˜çš„æ™‚é–“ä¾†å­¸ç¿’ï¼Œè¦æ˜ç™½å­¸ç¿’ä¸æ˜¯å­¸ç”Ÿçš„å°ˆåˆ©ã€‚",
            "ä¸€å€‹äººä¸æ€•éŒ¯ï¼Œå°±æ€•ä¸æ”¹éï¼Œæ”¹éŒ¯ä¸¦ä¸é›£ã€‚",
            "ä¸€å€‹äººå¹´è¼•çš„æ™‚å€™ï¼Œä¸æœƒæ€ç´¢ï¼Œä»–å°‡ä¸€äº‹ç„¡æˆã€‚",
            "ä¸€å€‹äººçš„å¿«æ¨‚ï¼Œä¸æ˜¯å› ç‚ºä»–æ“æœ‰çš„å¤šï¼Œè€Œæ˜¯å› ç‚ºä»–è¨ˆè¼ƒçš„å°‘ã€‚",
            "ä¸€å€‹äººçš„åƒ¹å€¼ï¼Œæ‡‰è©²çœ‹ä»–è²¢ç»ä»€éº¼ï¼Œè€Œä¸æ˜¯å–å¾—ä»€éº¼",
            "ä¸€å€‹äººçš„åƒ¹å€¼åœ¨æ–¼ä»–çš„æ‰è¯ï¼Œè€Œä¸åœ¨ä»–çš„è¡£é£¾",
            "ä¸€å€‹çœŸå¯¦çš„å¥½å‹ï¼Œå‹éåƒç™¾å€‹æ³›æ³›ä¹‹äº¤ã€‚",
            "ä¸€å€‹ç¼ºå£çš„æ¯å­ï¼Œæ›ä¸€å€‹è§’åº¦ä»ç„¶æ˜¯åœ“çš„ã€‚",
            "ä¸€ç¶“æ‰“æ“Šå°±ç°å¿ƒæ´©æ°£çš„äººï¼Œæ°¸é æ˜¯å¤±æ•—è€…ã€‚",
            "ä¸€é»å°ç–å¿½ï¼Œå¯èƒ½æœƒé‡€æˆå¤§ç¦å®³ã€‚",
            "äººäººæ˜¯è²´äººï¼Œäº‹äº‹æ˜¯è¦äº‹ã€‚",
            "äººä¸å¯è²Œç›¸ï¼Œæµ·æ°´ä¸å¯æ–—é‡ã€‚",
            "äººä¹‹æ°£è³ªï¼Œæœ¬é›£è®ŠåŒ–ï¼Œå”¯è®€æ›¸å‰‡å¯è®ŠåŒ–æ°£è³ªã€‚",
            "äººç”Ÿä¸ä¸€å®šçƒçƒå¥½çƒï¼Œä½†æ˜¯æœ‰æ­·ç·´çš„å¼·æ‰“è€…ï¼Œéš¨æ™‚éƒ½å¯ä»¥æ®æ£’",
            "äººç”Ÿä¸å¯èƒ½ç¸½æ˜¯é †å¿ƒå¦‚æ„ï¼Œä½†æŒçºŒæœè‘—é™½å…‰èµ°ï¼Œå½±å­å°±æœƒèº²åœ¨å¾Œé¢ï¼Œåˆºçœ¼ï¼Œå»æ˜¯å°çš„æ–¹å‘ã€‚",
            "äººç”Ÿç”Ÿæ´»çš„çœŸè«¦ï¼Œæ˜¯åšä¸€äº›æœ‰ç”¨çš„äº‹ã€‚",
            "äººç”Ÿæœ‰è¨±å¤šäº‹æƒ…ï¼Œæ­£å¦‚èˆ¹å¾Œçš„æ³¢ç´‹ï¼Œç¸½è¦éå¾Œæ‰è¦ºå¾—ç¾",
            "äººç”Ÿæœ‰å¤¢ï¼Œç¯‰å¤¢è¸å¯¦ã€‚",
            "äººç”Ÿæ²’æœ‰æ‰€æœ‰æ¬Šï¼Œåªæœ‰äººç”Ÿçš„ä½¿ç”¨æ¬Šã€‚",
            "äººç”Ÿè‹¥èƒ½æ¸›ä½æ…¾æœ›ï¼Œç”Ÿæ´»ä¾¿æ²’æœ‰ä»€éº¼å€¼å¾—è¨ˆè¼ƒã€‚",
            "äººç”Ÿæœ€å¤§çš„æˆå°±ï¼Œæ˜¯è¦å¾å¤±æ•—ä¸­ç«™èµ·ä¾†ã€‚",
            "äººçš„å¿ƒæ˜¯ä¸€ç•ç”°ï¼ŒåœŸåœ°æ²’æœ‰æ’­ä¸‹ç¨®å­ï¼Œä¹Ÿä¸æœƒé•·å‡ºå¥½æœå¯¦ã€‚",
            "äººçš„å‘½é‹æŒæ¡åœ¨è‡ªå·±æ‰‹ä¸­ã€‚",
            "äººçš„çœ¼ç›é•·åœ¨å‰é¢ï¼Œåªçœ‹åˆ°åˆ¥äººçš„ç¼ºé»ï¼Œå»çœ‹ä¸è¦‹è‡ªå·±çš„ç¼ºé»ã€‚",
            "äººéè–è³¢ï¼Œç†Ÿèƒ½ç„¡éã€‚",
            "äººå€‘ç¼ºä¹çš„ä¸æ˜¯åŠ›é‡ï¼Œè€Œæ˜¯æ„å¿—",
            "äººå€‘æ„ˆå°‘æ€è€ƒï¼Œèªªçš„è©±ä¾¿æ„ˆå¤š",
            "äººé€€ä¸€æ­¥ï¼Œæ„›äººå¯¬ä¸€å¯¸ï¼Œå°±æœƒå¾ˆå¿«æ¨‚ã€‚",
            "äººé€¢å–œäº‹ç²¾ç¥çˆ½ã€‚",
            "äººé€¢é †å¢ƒä¸é€å¼·ï¼Œèº«è™•é€†å¢ƒä¸ç¤ºå¼±ã€‚",
            "äººæ‡‰è©²ç›¸ä¿¡è‡ªå·±ï¼Œä½†ä¸å¯åŸ·è‘—ã€‚",
            "åˆ€è¦çŸ³ç£¨ï¼Œäººè¦äº‹ç£¨",
            "ä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸«ç„‰ï¼Œæ“‡å…¶å–„è€…è€Œå¾ä¹‹ï¼›å…¶ä¸å–„è€…è€Œæ”¹ä¹‹ã€‚",
            "ä¸‰æ—¥ä¸è®€æ›¸ä¾¿è¦ºè¨€èªç„¡å‘³é¢ç›®å¯æ†ã€‚",
            "ä¸‰å€‹è‡­çš®åŒ ï¼Œå‹éä¸€å€‹è«¸è‘›äº®ã€‚",
            "ä¸Šå¸æ‹¿èµ°äº†ä½ ä¸€æ¨£æ±è¥¿ï¼Œèªªä¸å®šæ˜¯æŠŠæ›´å¥½çš„çµ¦ä½ ",
            "å‡¡æµæ±—æ’­ç¨®ï¼Œå¿…æ­¡å‘¼æ”¶å‰²ã€‚",
            "åƒé‡Œä¹‹è·¯å¿…é ˆå¾ç¬¬ä¸€æ­¥é–‹å§‹ï¼Œè–äººçš„å¢ƒåŸŸä¹Ÿæ˜¯å‡¡å¤«èµ·æ­¥ã€‚",
            "å£èªªå¥½è©±ã€å¿ƒæƒ³å¥½æ„ã€èº«è¡Œå¥½äº‹ã€‚",
            "å¤§ä¸ˆå¤«èƒ½å±ˆèƒ½ä¼¸ã€‚",
            "å¤§è†½å‡è¨­ï¼Œå°å¿ƒæ±‚è­‰ã€‚",
            "å°å°çš„å¾®ç¬‘ï¼Œå¤§å¤§çš„å¢é€²äººå’Œäººä¹‹é–“çš„æ„Ÿæƒ…ã€‚",
            "å°äº‹ä¸åšï¼Œå¤§äº‹é›£æˆ",
            "å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚",
            "ä¸å…¥è™ç©´ï¼Œç„‰å¾—è™å­",
            "ä¸å¹¸æ˜¯ä¸€æ‰€æœ€å¥½çš„å¤§å­¸ã€‚",
            "ä¸è¦å°çœ‹è‡ªå·±ï¼Œå› ç‚ºäººæœ‰ç„¡é™çš„å¯èƒ½",
            "ä¸è¦åªæœƒå•åˆ¥äººèƒ½ç‚ºä½ åšä»€éº¼ï¼Œè€Œè¦å•è‡ªå·±èƒ½ç‚ºåˆ¥äººåšä»€éº¼ã€‚",
            "ä¸è¦å› ç‚ºä¸€æ¬¡æŒ«æŠ˜ï¼Œå°±æ”¾æ£„ä½ åŸä¾†æ±ºå¿ƒè¦é”åˆ°çš„ç›®æ¨™",
            "ä¸è¦ç°å¿ƒå–ªå¿—ï¼Œæ‰“å¾—é–‹é–çš„ç¸½æ˜¯ä½ è©¦çš„æœ€å¾Œä¸€æŠŠé‘°åŒ™ã€‚",
            "ä¸è¦å®³æ€•è¿·æƒ˜ æ‡‰è©²å®³æ€•çš„æ˜¯ï¼Œ é™¤äº†è¿·æƒ˜ ä»€éº¼ä¹Ÿä¸åš",
            "ä¸æ­äººæœªæ„ˆçš„å‚·å£ï¼Œæ˜¯çœŸæ­£çš„æ…ˆæ‚²",
            "ä¸æ•¢ä¸‹æ±ºå®šçš„äººå‘½é‹ç¸½æ˜¯æŒæ¡åœ¨åˆ¥äººæ‰‹è£¡ã€‚",
            "ä¸ç¶“ä¸€äº‹ï¼Œä¸é•·ä¸€æ™ºã€‚",
            "ä¸è½è€äººè¨€ï¼Œåƒè™§åœ¨çœ¼å‰ã€‚",
            "å‹¿ä»¥å–„å°è€Œä¸ç‚ºï¼Œå‹¿ä»¥æƒ¡å°è€Œç‚ºä¹‹ã€‚",
            "å¤©æœ‰ä¸æ¸¬é¢¨é›²ï¼Œäººæœ‰æ—¦å¤•ç¦ç¦ã€‚",
            "å¤ªé™½å…‰å¤§ï¼Œçˆ¶æ¯æ©å¤§ï¼Œå›å­é‡å¤§ï¼Œå°äººæ°£å¤§ã€‚",
            "å°‘å£¯ä¸åŠªåŠ›ï¼Œè€å¤§å¾’å‚·æ‚²",
            "å¿ƒä¸­ä¹‹æ™ºæ…§ï¼Œå„ªæ–¼æŒä¸­ä¹‹é‡‘éŒ¢ã€‚",
            "æ‰‹å¿ƒå‘ä¸‹æ˜¯åŠ©äººï¼Œæ‰‹å¿ƒå‘ä¸Šæ˜¯æ±‚äººï¼ŒåŠ©äººå¿«æ¨‚ï¼Œæ±‚äººç—›è‹¦ã€‚",
            "ä¸–ä¸Šæœ‰å…©ä»¶äº‹ä¸èƒ½ç­‰ï¼šä¸€æ˜¯å­é †ï¼ŒäºŒæ˜¯è¡Œå–„ã€‚",
            "ä¸–ç•Œä¸ŠçœŸæ­£æœ‰åƒ¹å€¼çš„äº‹ç‰©ï¼Œéœ€è¦ç†±æƒ…å’ŒçŠ§ç‰²æ‰èƒ½å®Œæˆã€‚",
            "ä¸–ç•Œæ„ˆæ‚²å‚·ï¼Œæˆ‘è¦æ„ˆå¿«æ¨‚ã€‚ç•¶äººå¿ƒæ„ˆéšªæƒ¡ï¼Œæˆ‘è¦æ„ˆå–„è‰¯ã€‚ç•¶æŒ«æŠ˜ä¾†äº†ï¼Œæˆ‘è¦æŒºèº«é¢å°ã€‚æˆ‘è¦åšä¸€å€‹æ¨‚è§€å‘ä¸Šï¼Œä¸é€€ç¸®ä¸å±ˆä¸é¥’ä¸æ€¨å¤©å°¤äººçš„äººï¼Œå‹‡æ•¢å»æ¥å—äººç”Ÿæ‰€æœ‰æŒ‘æˆ°çš„äºº",
            "ä»˜å‡ºæ„›å°±æ˜¯ç¦ï¼Œèƒ½æ¶ˆé™¤ç…©æƒ±å°±æ˜¯æ…§ã€‚",
            "ä»¥å‰ä¸æœƒï¼Œä¸ä»£è¡¨ç¾åœ¨ä¸æœƒï¼Œç¾åœ¨ä¸æœƒï¼Œä¸ä»£è¡¨å°‡ä¾†æ°¸é éƒ½ä¸æœƒã€‚",
            "ä»¥è¦ªåˆ‡çš„å¿ƒå»é—œæ‡·åˆ¥äººï¼Œé€™ä»½æ„›ä¾¿æ˜¯é€ ç¦çš„ç¨®å­ã€‚",
            "åªèªªå¥½è©±ã€å¿ƒæƒ³å¥½æ„ã€è‡ªè¡Œå¥½äº‹ã€‚",
            "å¯æ„›ä¹‹äººå¿…æœ‰å¯æƒ¡ä¹‹è™•ï¼Œå¯æƒ¡ä¹‹äººå¿…æœ‰å¯æ„›ä¹‹è™•ã€‚",
            "å°ä¸Šä¸€åˆ†é˜ï¼Œå°ä¸‹åå¹´åŠŸã€‚",
            "å››ç¥æ¹¯ï¼šçŸ¥è¶³ã€æ„Ÿæ©ã€å–„è§£ã€åŒ…å®¹ã€‚",
            "å¤±è¶³å°šå¯æŒ½å›ï¼Œå¤±è¨€ç„¡æ³•è£œæ•‘",
            "å¤±æ•—ä¸¦ä¸å¯æ¥ï¼Œå¯æ¥çš„æ˜¯ç„¡æ³•è¨˜å–æ•™è¨“ï¼Œå¾å¤±æ•—ä¸­é‡æ–°ç«™èµ·ä¾†ã€‚",
            "å¸ƒæ–½å¦‚æ’­ç¨®ï¼Œä»¥æ­¡å–œå¿ƒæ»‹æ½¤ç¨®å­ï¼Œæ‰æœƒç™¼èŠ½ã€‚",
            "æœªä¾†ç¤¾æœƒä¸­ï¼Œæ–‡ç›²ä¸¦éä¸è­˜å­—çš„äººï¼Œè€Œæ˜¯ä¸èƒ½å†å­¸ç¿’çš„äººã€‚",
            "ç”˜æ–¼å¹³å‡¡æ‰èƒ½å‰å¤§ï¼Œäººç”Ÿæ²’æœ‰æ°¸é çš„å·”å³°ã€‚",
            "ç”˜é¡˜åšï¼Œæ­¡å–œå—ã€‚",
            "ç”Ÿå‘½ä¸­æœ€å€¼å¾—æŠ•è³‡çš„æ˜¯è‡ªå·±ã€‚",
            "ç”Ÿå‘½åƒä¸€è‚¡æ¿€æµï¼Œæ²’æœ‰å²©çŸ³å’Œæš—ç¤ï¼Œå°±æ¿€ä¸èµ·ç¾éº—çš„æµªèŠ±",
            "ç”Ÿæ´»æ²’æœ‰ç›®çš„ï¼ŒçŒ¶å¦‚èˆªæµ·ç¼ºå°‘ç¾…ç›¤ã€‚",
            "ç”Ÿæ´»æ²’æœ‰ç›®æ¨™ï¼Œå°±åƒèˆªæµ·æ²’æœ‰æŒ‡å—é‡ã€‚",
            "ç”Ÿæ°£å°±æ˜¯æ‹¿åˆ¥äººçš„ééŒ¯ä¾†æ‡²ç½°è‡ªå·±ã€‚",
            "ç«‹å¿—åœ¨å …å®šä¸åœ¨éŠ³ï¼ŒæˆåŠŸåœ¨ä¹…ä¸åœ¨é€Ÿã€‚",
            "ä»»ä½•ä¸€ä»¶äº‹éƒ½æ˜¯å¾ä¸€å€‹æ±ºå¿ƒé–‹å§‹ã€‚",
            "å…ˆç‚ºåˆ¥äººçš„å¿«æ¨‚è‘—æƒ³ï¼Œæ˜¯è¶…äººï¼›å…ˆç‚ºè‡ªå·±çš„å¿«æ¨‚è‘—æƒ³ï¼Œæ˜¯å‡¡äººï¼›ä½¿åˆ¥äººä¸å¿«æ¨‚ï¼Œè‡ªå·±ä¹Ÿä¸å¿«æ¨‚çš„ï¼Œæ˜¯ç¬¨äººã€‚",
            "å†æ€éº¼å‰å¤§çš„é“ç†ï¼Œèªªå¤šäº†ä¹Ÿæœƒè®Šæˆé™³è…”æ¿«èª¿",
            "åƒé£¯æ˜¯ç‚ºäº†æ´»è‘—ï¼Œä½†æ´»è‘—ä¸æ˜¯ç‚ºäº†åƒé£¯ã€‚",
            "åœ¨æˆ‘çš„å­—å…¸è£æ²’æœ‰é›£é€™å€‹å­—",
            "åœ°ä¸Šç¨®äº†èœï¼Œå°±ä¸æ˜“é•·è‰ï¼›å¿ƒä¸­æœ‰å–„ï¼Œå°±ä¸æ˜“ç”Ÿæƒ¡ã€‚",
            "å¤šä¸€ä»½ä»˜å‡ºï¼Œå°±èƒ½å¤šä¸€ä»½æˆå°±ã€‚",
            "å¤šä¸å¦‚è©±å°‘ï¼Œè©±å°‘ä¸å¦‚è©±å¥½ã€‚",
            "å¥½çš„é–‹å§‹æ˜¯æˆåŠŸçš„ä¸€åŠ",
            "å¦‚æœæœ‰æ‰€ä»˜å‡ºï¼Œå°±æƒ³è¦æœ‰æ‰€å›å ±ï¼Œæœƒæ‹›ä¾†ç…©æƒ±ã€‚",
            "å¦‚æœæˆ‘å€‘è¼•æ˜“æ”¾æ£„æˆ‘å€‘è©²åšçš„ï¼Œä¸–ç•ŒåŒæ¨£ä¹Ÿæœƒæ”¾æ£„æˆ‘å€‘ã€‚",
            "æˆåŠŸçš„äººæ‰¾æ–¹æ³•ï¼Œå¤±æ•—çš„äººæ‰¾è—‰å£ã€‚",
            "æˆåŠŸçš„äººæ˜¯æŠ“ä½æ™‚æ©Ÿçš„äºº",
            "æˆåŠŸçš„å”¯ä¸€å¯†è¨£ï¼Œæ˜¯å …æŒåˆ°æœ€å¾Œä¸€åˆ†é˜ã€‚",
            "æˆåŠŸæ˜¯ä¸€åˆ†çš„å¤©æ‰ï¼ŒåŠ ä¸Šä¹åä¹åˆ†çš„åŠªåŠ›",
            "æˆåŠŸæ˜¯å„ªé»çš„ç™¼æ®ã€å¤±æ•—æ˜¯ç¼ºé»çš„ç´¯ç¸¾",
            "æˆåŠŸç­‰æ–¼ã€Œè‰±è‹¦çš„å‹¤å‹ã€åŠ ã€Œæ­£ç¢ºçš„æ–¹æ³•ã€åŠ ã€Œå°‘èªªç©ºè©±ã€ã€‚",
            "æˆç¸¾æ»¿åˆ†ä¸æ˜¯å¹¸ç¦äººç”Ÿçš„ä¿è­‰ï¼Œç´€å¾‹èˆ‡è‡ªå¾‹æ‰æ˜¯æˆåŠŸçš„åŸºçŸ³ã€‚",
            "æœ‰æ™‚ç•¶æ€ç„¡æ™‚è‹¦ï¼Œå¥½å¤©è¦ç©é›¨ä¾†ç³§ã€‚",
            "è‡ªå·±å®³è‡ªå·±ï¼Œè«éæ–¼äº‚ç™¼è„¾æ°£ã€‚",
            "è‡ªä¿¡æ˜¯æˆåŠŸçš„ç¬¬ä¸€ç§˜è¨£",
            "å…‹æœå›°é›£ä¸è¦è¢«å›°é›£å…‹æœã€‚",
            "å…‹æœææ‡¼çš„æœ€ä½³å°ç­–ï¼Œå°±æ˜¯å‹‡æ•¢åœ°é¢å°å®ƒã€‚",
            "å³ä½¿è¼¸æ‰äº†ä¸€åˆ‡ï¼Œä¹Ÿä¸è¦è¼¸æ‰å¾®ç¬‘",
            "å›å­ç«‹æ†å¿—ï¼Œå°äººæ†ç«‹å¿—ã€‚",
            "å›å­æœ‰æˆäººä¹‹ç¾ã€‚",
            "å›°é›£çš„èƒŒå¾Œï¼Œéš±è—è‘—é€šå¾€æˆåŠŸçš„éšæ¢¯ã€‚",
            "å¸Œæœ›ä¸ä¸€å®šéƒ½èƒ½å¯¦ç¾ï¼Œä½†å‹•æ‰‹å»åšï¼Œå°±å¤šäº†ä¸€ä»½å¯èƒ½æ€§ã€‚",
            "å¿å°å¿¿è€Œå°±å¤§è¬€ã€‚",
            "å¿«æ¨‚çš„ç§˜è¨£ï¼Œä¸æ˜¯åšä½ æ‰€å–œæ­œçš„äº‹ï¼Œè€Œæ˜¯å–œæ­¡ä½ æ‰€åšçš„äº‹ã€‚",
            "æˆ‘å€‘æœ‰å…©éš»è€³æœµå’Œä¸€å€‹å˜´å·´ï¼Œç›®çš„åœ¨å¤šè½å°‘èªª",
            "æˆ‘å€‘å¾—è¨˜å¾—ï¼Œåªæœ‰æ™ºèƒ½æ˜¯ä¸å¤ çš„ï¼Œæ™ºèƒ½åŠ ä¸Šå“æ ¼ï¼Œæ‰æ˜¯çœŸæ­£çš„ç›®æ¨™ã€‚",
            "æˆ‘å€‘æœ€å¤§çš„æ•µäººä¸æ˜¯åˆ¥äººå¯èƒ½æ˜¯è‡ªå·±ã€‚",
            "æŠŠä½ çš„ç‡ˆæé«˜ä¸€é»ï¼Œå¥½ç…§äº®æ›´å¤šäººçš„è·¯ã€‚",
            "æŠŠæ´»è‘—çš„æ¯ä¸€å¤©éƒ½çœ‹ä½œæ˜¯ç”Ÿå‘½çš„æœ€å¾Œä¸€å¤©",
            "æ”¹è®Šè‡ªå·±æ˜¯è‡ªæ•‘ï¼Œå½±éŸ¿åˆ¥äººæ˜¯æ•‘äººã€‚",
            "æ¯å¤©éƒ½æ˜¯ç”Ÿå‘½ä¸­çš„ä¸€å¼µç™½ç´™ï¼Œæ¯ä¸€ä»¶äº‹éƒ½æ˜¯ä¸€ç¯‡ç”Ÿå‹•çš„æ–‡ç« ã€‚",
            "æ±‚äººä¸å¦‚æ±‚å·±ã€‚",
            "è‰¯è—¥è‹¦å£åˆ©æ–¼ç—…ï¼Œå¿ è¨€é€†è€³åˆ©æ–¼è¡Œã€‚",
            "è¦‹è³¢æ€é½Šï¼Œè¦‹ä¸è³¢å…§è‡ªçœã€‚",
            "èº«åœ¨ç¦ä¸­ä¸çŸ¥ç¦",
            "äº‹éç¶“éä¸çŸ¥é›£ã€‚",
            "å—äººé»æ°´ä¹‹æ©ï¼Œéœ€ç•¶æ¹§æ³‰ä»¥å ±ã€‚",
            "å’Œä½ ä¸€åŒç¬‘éçš„äººï¼Œä½ å¯èƒ½æŠŠä»–å¿˜æ‰ï¼›ä½†æ˜¯å’Œä½ ä¸€åŒå“­éçš„äººï¼Œä½ å»æ°¸é ä¸å¿˜",
            "å¹¸ç¦çš„äººä¸æ˜¯å› ç‚ºæ“æœ‰çš„å¤šï¼Œè€Œæ˜¯å°æ‰€æœ‰å¹³å‡¡çš„äº‹ç‰©éƒ½èƒ½æ„Ÿå—å¾—å¤šã€‚",
            "æ‰€è¬‚çš„å²å®³ ï¼Œå°±æ˜¯è®“é€™å€‹ä¸–ç•Œå› ç‚ºæœ‰äº†æˆ‘ ï¼Œæœƒæœ‰ä¸€é»é»å·®åˆ¥",
            "æ˜æ—¥å¾©æ˜æ—¥ï¼Œæ˜æ—¥ä½•å…¶å¤šï¼æˆ‘ç”Ÿå¾…æ˜æ—¥ï¼Œè¬äº‹æˆè¹‰è·ã€‚",
            "æ±è¥¿å¯ä»¥äº‚åƒï¼Œè©±ä¸å¯ä»¥äº‚èªªã€‚",
            "æ¬£è³åˆ¥äººå°±æ˜¯èŠåš´è‡ªå·±ã€‚",
            "çŸ¥ä¹‹ç‚ºçŸ¥ä¹‹ï¼Œä¸çŸ¥ç‚ºä¸çŸ¥ï¼Œæ˜¯çŸ¥ä¹Ÿã€‚",
            "çŸ¥è¶³çš„äººå¿ƒé‡é–‹é—Šï¼Œå¿ƒé‡é–‹é—Šï¼Œå°äººå°äº‹å°±ä¸æœƒè¨ˆè¼ƒã€‚",
            "çŸ¥å…¶ä¸€ï¼Œä¸çŸ¥å…¶äºŒã€‚",
            "çŸ¥éŒ¯èƒ½æ”¹ï¼Œå–„è«å¤§ç„‰ã€‚",
            "çŸ¥è­˜çš„åŸºç¤å¿…é ˆå»ºç«‹åœ¨é–±è®€ä¸Šé¢ã€‚",
            "çŸ¥è­˜æ˜¯ä¸€åº§å¯¶åº«ï¼Œè€Œå¯¦è¸æ˜¯é–‹å•Ÿå¯¶åº«çš„é‘°åŒ™ã€‚",
            "çŸ¥è­˜è¦ç”¨å¿ƒé«”æœƒï¼Œæ‰èƒ½è®Šæˆè‡ªå·±çš„æ™ºæ…§ã€‚",
            "çŸ¥è­˜å°±æ˜¯åŠ›é‡ã€‚",
            "è¿‘æœ±è€…èµ¤ï¼Œè¿‘å¢¨è€…é»‘ã€‚",
            "é‡‘éŒ¢ä¸æ˜¯è¬èƒ½ï¼Œæ²’éŒ¢å»æ˜¯è¬è¬ä¸èƒ½ã€‚",
            "é’é›²æœ‰è·¯å¿—ç‚ºæ¢¯ï¼Œå­¸æµ·ç„¡æ¶¯å‹¤æ˜¯å²¸ã€‚",
            "ä¿¡å¿ƒã€æ¯…åŠ›ã€å‹‡æ°£ä¸‰è€…å…·å‚™ï¼Œå‰‡å¤©ä¸‹æ²’æœ‰åšä¸æˆçš„äº‹ã€‚",
            "ä¿¡å¿ƒæ˜¯å‘½é‹çš„ä¸»å®°ã€‚",
            "å‰äº‹ä¸å¿˜ï¼Œå¾Œäº‹ä¹‹å¸«ã€‚",
            "å‰è…³èµ°ï¼Œå¾Œè…³æ”¾ï¼Œæ„å³ï¼šæ˜¨å¤©çš„äº‹å°±è®“ä»–éå»ï¼ŒæŠŠå¿ƒç¥å°ˆæ³¨æ–¼ä»Šå¤©è©²åšçš„äº‹ã€‚",
            "å±‹å¯¬ä¸å¦‚å¿ƒå¯¬",
            "æ´»è‘—å°±è¦å­¸ç¿’ï¼Œå­¸ç¿’ä¸æ˜¯ç‚ºäº†æ´»è‘—ã€‚",
            "æµæ±—çš„éŒ¢ï¼Œä¸æœƒè·‘ï¼›æµæ±—çš„å­©å­ï¼Œä¸æœƒå€’ã€‚",
            "ç‚ºäººè™•ä¸–è¦å°å¿ƒã€ç´°å¿ƒï¼Œä½†ä¸è¦ã€Œå°å¿ƒçœ¼ã€ã€‚",
            "ç‚ºè‡ªå·±æ‰¾è—‰å£çš„äººï¼Œæ°¸é ä¸æœƒé€²æ­¥ã€‚",
            "ç‚ºå­¸å¥½åƒé‡‘å­—å¡”ï¼Œè¦èƒ½å»£å¤§è¦èƒ½é«˜ã€‚",
            "çš‡å¤©ä¸è² è‹¦å¿ƒäººã€‚",
            "çœ‹åˆ¥äººä¸é †çœ¼ï¼Œæ˜¯è‡ªå·±çš„ä¿®é¤Šä¸å¤ ã€‚",
            "è‹¦é›£æ˜¯äººç”Ÿçš„è€å¸«",
            "è¦ç”¨å¿ƒä¸è¦ç…©å¿ƒã€‚",
            "è¦åœ¨ç”Ÿæ´»ä¸­å­¸ç¿’çœŸæœ¬äº‹ï¼Œå®ƒæ°¸é å­¸ä¸å®Œã€‚",
            "è¦æ‰¹è©•åˆ¥äººæ™‚ï¼Œå…ˆæƒ³æƒ³çœ‹è‡ªå·±æ˜¯å¦å®Œç¾ç„¡ç¼ºã€‚",
            "è¦ç¤¾æœƒä¸æ·˜æ±°ä½ ï¼Œä½ é¦–å…ˆè¦ä¸æ”¾æ£„è‡ªå·±ã€‚",
            "è¦ç‚ºæˆåŠŸæ‰¾æ–¹æ³•ï¼Œä¸è¦ç‚ºå¤±æ•—æ‰¾è—‰å£ã€‚",
            "è¦å¾—åˆ°åˆ¥äººçš„ä¿¡ä»»ï¼Œè‡ªå·±å¿…é ˆå…ˆå€¼å¾—ä¿¡è³´ã€‚",
            "é¢å°å…‰æ˜ï¼Œé™°å½±å°±åœ¨æˆ‘å€‘èº«å¾Œã€‚",
            "åŸè«’åˆ¥äººå°±æ˜¯å–„å¾…è‡ªå·±ã€‚",
            "å¼±è€…åå¾…æ™‚æ©Ÿï¼Œå¼·è€…è£½é€ æ™‚æ©Ÿ",
            "æ™‚æ™‚å¥½å¿ƒå°±æ˜¯æ™‚æ™‚å¥½æ—¥ã€‚",
            "æ›¸æœ¬åƒé™è½å‚˜ä¸€æ¨£ï¼Œè¦æ‰“é–‹äº†æ‰æœ‰ä½œç”¨ã€‚",
            "æ›¸åˆ°ç”¨æ™‚æ–¹æ¨å°‘ã€‚",
            "æ›¸æœ€å¤§çš„å½±éŸ¿åŠ›ï¼Œå°±æ˜¯å¯ä»¥åˆºæ¿€è®€è€…è‡ªæˆ‘æ€è€ƒã€‚",
            "çœŸæ­£çš„å‹èª¼çŒ¶å¦‚å¥åº·ï¼Œåªæœ‰å¤±å»æ™‚ï¼Œæ‰æœƒæ„è­˜åˆ°å®ƒçš„åƒ¹å€¼ã€‚",
            "çœŸæ­£çš„è¡°é€€ä¸æ˜¯ç™½é«®å’Œçšºç´‹ï¼Œè€Œæ˜¯åœæ­¢äº†å­¸ç¿’èˆ‡é€²å–",
            "çœŸæ­£çš„æ„›å¿ƒï¼Œæ˜¯ç…§é¡§å¥½è‡ªå·±çš„é€™é¡†å¿ƒã€‚",
            "çœŸç†ä¸éœ€è¦ç”¨è‰²å½©åŒ…è£ï¼›ç¾éº—ä¸éœ€è¦ç”¨æ–‡ç­†æç•«",
            "ç«™åœ¨åŠè·¯æ¯”èµ°åˆ°çµ‚é»æ›´è¾›è‹¦ã€‚",
            "èƒ½å–„ç”¨æ™‚é–“çš„äººï¼Œå¿…èƒ½æŒæ¡è‡ªå·±çš„æ–¹å‘ã€‚",
            "è²¡å¯Œä¸¦éæ°¸ä¹…çš„æœ‹å‹ï¼Œä½†æœ‹å‹å»æ˜¯æ°¸ä¹…çš„è²¡å¯Œã€‚",
            "é€ƒé¿ä¸ä¸€å®šèº²å¾—éï¼›é¢å°ä¸ä¸€å®šæœ€é›£éã€‚",
            "å‰å¤§äººç‰©æœ€æ˜é¡¯çš„æ¨™èªŒï¼Œå°±æ˜¯ä»–å …å¼·çš„æ„å¿—",
            "åšäººè¦åœ¨æœ‰ç–‘è™•ä¸ç–‘ï¼›åšå­¸å•è¦åœ¨ä¸ç–‘è™•æœ‰ç–‘ã€‚",
            "åšå¥½äº‹ä¸èƒ½å°‘æˆ‘ä¸€äººï¼Œåšå£äº‹ä¸èƒ½å¤šæˆ‘ä¸€äººã€‚",
            "åšè©²åšçš„äº‹æ˜¯æ™ºæ…§ï¼Œåšä¸è©²åšçš„äº‹æ˜¯æ„šè ¢ã€‚",
            "å …æ±ºçš„ä¿¡å¿ƒï¼Œèƒ½ä½¿å¹³å‡¡çš„äººï¼Œæˆå°±ä¸å¹³å‡¡çš„äº‹ã€‚",
            "å …å…¶å¿—ï¼Œè‹¦å…¶åŠ›ï¼Œäº‹ç„¡å¤§å°ï¼Œå¿…æœ‰æ‰€æˆã€‚",
            "å®¿å‘½è«–æ˜¯é‚£äº›ç¼ºä¹æ„å¿—åŠ›çš„å¼±è€…çš„è—‰å£",
            "å¾—ç†è¦é¥’äººï¼Œç†ç›´è¦å’Œæ°£ã€‚",
            "å¾ä¾†ä¸è·Œå€’ä¸ç®—å…‰å½©ï¼Œæ¯æ¬¡è·Œå€’å¾Œèƒ½å†ç«™èµ·ä¾†ï¼Œæ‰æ˜¯æœ€å¤§çš„æ¦®è€€ã€‚",
            "æ¥å—æˆ‘å€‘ä¸èƒ½æ”¹è®Šçš„ï¼Œæ”¹è®Šæˆ‘å€‘èƒ½æ”¹è®Šçš„ã€‚",
            "æ•™è‚²çš„ç›®çš„ï¼Œåœ¨æ–¼è®“æ¯ä¸€å€‹äººå…·å‚™ã€Œåšè‡ªå·±æ‡‰è©²åšçš„äº‹ã€çš„æ„é¡˜ã€‚",
            "æ¬²é€Ÿå‰‡ä¸é”ã€‚",
            "ç†æƒ³çš„æ›¸ç±æ˜¯æ™ºæ…§çš„é‘°åŒ™ã€‚",
            "è™•é †å¢ƒå¿…é ˆè¬¹æ…ï¼Œè™•é€†å¢ƒå¿…é ˆå¿è€",
            "è²ªä¸ä½†å¸¶ä¾†ç—›è‹¦ï¼Œä¹Ÿä½¿äººå¢®è½ã€‚",
            "éº»é›€é›–å°ï¼Œäº”è‡Ÿä¿±å…¨ã€‚",
            "å‰µé€ æ©Ÿæœƒï¼Œä¸è¦ç­‰å¾…æ©Ÿæœƒã€‚",
            "å‹ä¸é©•ï¼Œæ•—ä¸é¤’ã€‚",
            "å‹æ•—ä¹ƒå…µå®¶å¸¸äº‹",
            "å–„è¨€èƒ½è´å¾—è½çœ¾ï¼Œå–„è½æ‰èƒ½è´å¾—æœ‹å‹",
            "æœ€å›°é›£çš„æ™‚å€™ï¼Œä¹Ÿå°±æ˜¯æˆ‘å€‘é›¢æˆåŠŸä¸é çš„åœ°æ–¹",
            "æœ€ç¾çš„é¢å­”æ˜¯å¸¶è‘—å¾®ç¬‘ç™¼è‡ªå…§å¿ƒçš„å¾®ç¬‘ã€‚",
            "æœ€ç—›è‹¦çš„æ™‚å€™ï¼Œå°±æ˜¯å¿«è¦æˆåŠŸçš„æ™‚å€™ã€‚",
            "ç„¡è«–å¤šéº¼ä¸é‡è¦çš„ä¸€ä»¶äº‹ï¼Œåªè¦æ¨‚åœ¨å…¶ä¸­ï¼Œéƒ½æœƒç²ç›Šç„¡çª®ã€‚",
            "ç„¡è«–å“ªä¸€ä»¶äº‹ï¼Œåªè¦å¾é ­åˆ°å°¾å¾¹åº•åšæˆåŠŸï¼Œä¾¿æ˜¯å¤§äº‹ã€‚",
            "çŒ¶è±«ä¸æ±ºæœƒå¤±æ‰ä¸€åˆ‡ã€‚",
            "è„¾æ°£å˜´å·´ä¸å¥½ï¼Œå¿ƒåœ°å†å¥½ä¹Ÿä¸ç®—å¥½äººã€‚",
            "é»‘å¤œç„¡è«–æ€æ¨£æ¼«é•·ï¼Œç™½æ™ç¸½æœƒåˆ°ä¾†",
            "æ„å¿—æ°¸ä¸å±ˆæœçš„äººï¼Œæ²’æœ‰æ‰€è¬‚å¤±æ•—",
            "æ„›ä¸æ˜¯è¦æ±‚å°æ–¹ï¼Œè€Œæ˜¯è¦è‡ªç”±ä»˜å‡ºã€‚",
            "æ­²æœˆå¯ä»¥ä½¿äººè’¼è€ï¼Œä½†å¿ƒéˆå»å¯æ°¸ä¿é’æ˜¥ã€‚",
            "ç•¶ä¸€å€‹äººæ²’æœ‰ç”šéº¼å¯ä»¥å¤±å»çš„æ™‚å€™ï¼Œè¦å‹‡æ•¢æ˜¯å†å®¹æ˜“ä¸éäº†ã€‚",
            "è¬äº‹å…·å‚™ï¼Œåªæ¬ æ±é¢¨ã€‚",
            "è©±å¤šä¸å¦‚è©±å¥½ï¼Œè©±å°‘ä¸å¦‚è©±å¥½ï¼šå¤šè©±ä¸å¦‚èªªå¥½è©±",
            "é“å¾·æ˜¯ææ˜‡è‡ªæˆ‘æ˜ç‡ˆï¼Œä¸æ‡‰è©²æ˜¯å–æ–¥åˆ¥äººçš„é­å­ã€‚",
            "å¯§å¯åŠªåŠ›ä¸€ä¸‹å­ï¼Œä¹Ÿä¸è¦å¾Œæ‚”ä¸€é™£å­ï¼›å¯§å¯è¾›è‹¦ä¸€é™£å­ï¼Œä¹Ÿä¸è¦åƒè‹¦ä¸€è¼©å­ã€‚",
            "å°çˆ¶æ¯è¦çŸ¥æ©ã€æ„Ÿæ©ã€å ±æ©ã€‚",
            "å°æ·µåšå‹ï¼Œå¦‚è®€ç•°æ›¸ï¼›å°é¢¨é›…å‹ï¼Œå¦‚è®€åäººè©©æ–‡ï¼›å°è¬¹é£­å‹ï¼Œå¦‚è®€è–è³¢ç¶“å‚³ï¼›å°æ»‘ç¨½å‹ï¼Œå¦‚é–±å‚³å¥‡å°èªªã€‚",
            "æ»´æ°´æˆæ²³ï¼Œç²’ç±³æˆç±®ï¼Œå‹¿è¼•å·±éˆï¼Œå‹¿ä»¥å°å–„è€Œä¸ç‚ºã€‚",
            "æ»´æ°´èƒ½ç©¿çŸ³ä¸æ˜¯é åŠ›ï¼Œè€Œæ˜¯å› ç‚ºå®ƒä¸æ¨æ™å¤œ",
            "èˆ‡å›ä¸€å¸­è©±ï¼Œå‹è®€åå¹´æ›¸ã€‚",
            "èªªå¥½è©±æ™‚ï¼Œåƒè¬è¦æœ‰ä¸€ä»½èª æ‡‡çš„å¿ƒã€‚",
            "æ¨‚è§€æ˜¯æˆåŠŸä¹‹æºï¼Œæ‚²è§€æ˜¯å¤±æ•—ä¹‹å› ã€‚",
            "ç†±è¡·æ–¼æŸä¸€æ¨£äº‹ç‰©çš„äººï¼Œå°±æ˜¯æœ‰äº†èƒ½å¤ åŠªåŠ›çš„è³‡è³ªã€‚é€™æ¨£çš„å­¸ç”Ÿä¸€æ—¦é›†ä¸­ç²¾åŠ›çš„è©±ï¼Œå°±èƒ½ç™¼æ®å¾ˆå¤§çš„åŠ›é‡ã€‚",
            "çšºçœ‰å’Œå¾®ç¬‘éƒ½æ˜¯ä¸€å€‹è¡¨æƒ…ï¼Œä½•ä¸å¾®ç¬‘ï¼Ÿ",
            "èª°è™›åº¦å¹´è¯ï¼Œé’æ˜¥å°±æœƒè¤ªè‰²ï¼Œç”Ÿå‘½å°±æœƒæ”¾æ£„ä»–å€‘ã€‚",
            "é©è€…ç”Ÿå­˜ï¼Œä¸é©è€…æ·˜æ±°ã€‚",
            "å­¸å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸é€²å‰‡é€€ã€‚",
            "å­¸å•å¥½æ¯”è…¸èƒƒè£¡çš„é£Ÿç‰©ï¼Œè£ä¸‹å¤šå°‘ä¸¦ä¸é‡è¦ï¼Œå¸æ”¶å¤šå°‘æ‰é‡è¦ã€‚",
            "å­¸ç¿’å°±æ˜¯å­¸è‘—å°‹æ‰¾æ¨‚è¶£ã€‚",
            "éœåå¸¸æ€è€ƒéï¼Œé–’è«‡è«–è«éã€‚",
            "æ‡‚å¾—æ”¾å¿ƒçš„äººæ‰¾åˆ°è¼•é¬†ï¼Œæ‡‚å¾—éºå¿˜çš„äººæ‰¾åˆ°è‡ªç”±ï¼Œæ‡‚å¾—é—œæ‡·çš„äººæ‰¾åˆ°æœ‹å‹ã€‚",
            "è°æ˜çš„äººæƒ³éæ‰é–‹å£ã€‚",
            "è¬Šè¨€åƒä¸€æœµé®®èŠ±ï¼Œå¤–è¡¨ç¾éº—ï¼Œç”Ÿå‘½çŸ­æš«ã€‚",
            "å£äº‹ä¸èƒ½å¤šæˆ‘ä¸€äººï¼Œåšå¥½äº‹ä¸èƒ½å°‘æˆ‘ä¸€äººã€‚",
            "è­˜æ™‚å‹™è€…ç‚ºä¿Šå‚‘ã€‚",
            "åš´å¸«å‡ºé«˜å¾’",
            "åš´æ ¼ä¹Ÿæ˜¯ä¸€ç¨®æ…ˆæ‚²ã€‚",
            "æ­¡å–œæ˜¯ä¸€ç¨®æ¶µé¤Šï¼Œèƒ½ä»¤å‘¨åœçš„äººéƒ½æœ‰å¦‚æ²æ˜¥é¢¨çš„å–œæ‚…æ„Ÿã€‚",
            "è½åˆ°å¥½è©±è¦æ„Ÿæ©ï¼Œè½åˆ°å£è©±è¦å–„è§£ã€‚",
            "è®€ä¸€æœ¬å¥½æ›¸ï¼Œå°±å¥½åƒè·Ÿä¸€ä½é«˜å°šçš„äººèªªè©±ã€‚",
            "è®€æ‰€ç²å¾—çš„æœ€å¤§å¿«æ¨‚ï¼Œæ˜¯å¥½åƒé€éä¸€é¢é¡å­ï¼Œçœ‹åˆ°è‡ªå·±çš„å¿ƒéˆã€‚",
            "è®€æ›¸ç ´è¬å·ï¼Œä¸‹ç­†å¦‚æœ‰ç¥ã€‚"
        ];

        this.currentQuoteIndex = 0;

        this.initializeElements();
        this.bindEvents();
        this.setNextAlarm();
        this.showRandomQuote();
    }

    initializeElements() {
        this.studyTimeEl = document.getElementById('studyTime');
        this.nextAlarmEl = document.getElementById('nextAlarm');
        this.shortBreakEl = document.getElementById('shortBreak');
        this.longBreakEl = document.getElementById('longBreak');
        this.statusEl = document.getElementById('status');
        this.quoteTextEl = document.getElementById('quoteText');

        // é€²åº¦æ¢å…ƒç´ 
        this.alarmProgressEl = document.getElementById('alarmProgress');
        this.longBreakProgressEl = document.getElementById('longBreakProgress');
        this.longBreakTextEl = document.getElementById('longBreakText');

        // æ§åˆ¶æŒ‰éˆ•
        this.startBtn = document.getElementById('startBtn');
        this.pauseBtn = document.getElementById('pauseBtn');
        this.resetBtn = document.getElementById('resetBtn');
        this.breakBtn = document.getElementById('breakBtn');

        // éŸ³æ•ˆæ§åˆ¶
        this.soundSelect = document.getElementById('soundSelect');
        this.customSoundInput = document.getElementById('customSound');
        this.testSoundBtn = document.getElementById('testSound');
    }

    bindEvents() {
        this.startBtn.addEventListener('click', () => this.start());
        this.pauseBtn.addEventListener('click', () => this.pause());
        this.resetBtn.addEventListener('click', () => this.reset());
        this.breakBtn.addEventListener('click', () => this.startShortBreak());
        this.testSoundBtn.addEventListener('click', () => this.playAlarmSound());

        this.soundSelect.addEventListener('change', (e) => {
            if (e.target.value === 'custom') {
                this.customSoundInput.style.display = 'inline';
                this.customSoundInput.click();
            } else {
                this.customSoundInput.style.display = 'none';
            }
        });

        this.customSoundInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const url = URL.createObjectURL(file);
                this.customAudio = new Audio(url);
            }
        });
    }

    start() {
        this.isRunning = true;
        this.startBtn.disabled = true;
        this.pauseBtn.disabled = false;
        this.statusEl.textContent = 'å­¸ç¿’ä¸­...';

        this.timer = setInterval(() => {
            this.studyTime++;
            this.nextAlarmTime--;
            this.quoteTime--;

            this.updateDisplay();
            this.updateProgressBars();

            // æª¢æŸ¥æ˜¯å¦éœ€è¦éŸ¿éˆ´
            if (this.nextAlarmTime <= 0 && !this.alarmActive) {
                this.triggerAlarm();
            }

            // æª¢æŸ¥æ˜¯å¦éœ€è¦æ›´æ›åè¨€
            if (this.quoteTime <= 0) {
                this.showRandomQuote();
                this.quoteTime = 120; // é‡ç½®2åˆ†é˜
            }

            // æª¢æŸ¥æ˜¯å¦éœ€è¦é•·ä¼‘æ¯ (90åˆ†é˜ = 5400ç§’)
            if (this.studyTime > 0 && this.studyTime % 5400 === 0) {
                this.startLongBreak();
            }
        }, 1000);
    }

    pause() {
        this.isRunning = false;
        this.startBtn.disabled = false;
        this.pauseBtn.disabled = true;
        this.statusEl.textContent = 'å·²æš«åœ';
        clearInterval(this.timer);
    }

    reset() {
        this.isRunning = false;
        this.studyTime = 0;
        this.quoteTime = 120;
        this.isShortBreak = false;
        this.isLongBreak = false;
        this.alarmActive = false;

        this.startBtn.disabled = false;
        this.pauseBtn.disabled = true;
        this.breakBtn.disabled = true;

        this.setNextAlarm();
        this.updateDisplay();
        this.updateProgressBars();
        this.showRandomQuote();
        this.statusEl.textContent = 'æŒ‰ä¸‹ã€Œé–‹å§‹å­¸ç¿’ã€é–‹å§‹è¨ˆæ™‚';

        clearInterval(this.timer);
        clearInterval(this.breakTimer);
    }

    setNextAlarm() {
        // éš¨æ©Ÿè¨­å®š3-5åˆ†é˜ (180-300ç§’)
        this.nextAlarmTime = Math.floor(Math.random() * (300 - 180 + 1)) + 180;
        this.maxAlarmTime = this.nextAlarmTime;
    }

    triggerAlarm() {
        this.alarmActive = true;
        this.breakBtn.disabled = false;
        this.statusEl.textContent = 'ğŸ”” éŸ¿éˆ´ï¼è«‹æŒ‰ä¸‹ä¼‘æ¯æŒ‰éˆ•é–‹å§‹10ç§’ä¼‘æ¯';
        this.statusEl.classList.add('alarm-active');

        this.playAlarmSound();
    }

    startShortBreak() {
        this.isShortBreak = true;
        this.shortBreakTime = 10;
        this.alarmActive = false;
        this.breakBtn.disabled = true;
        this.statusEl.classList.remove('alarm-active');
        this.statusEl.textContent = 'çŸ­ä¼‘æ¯ä¸­...';

        this.breakTimer = setInterval(() => {
            this.shortBreakTime--;
            this.updateDisplay();

            if (this.shortBreakTime <= 0) {
                this.endShortBreak();
            }
        }, 1000);
    }

    endShortBreak() {
        this.isShortBreak = false;
        this.setNextAlarm();
        this.statusEl.textContent = 'ä¼‘æ¯çµæŸï¼Œç¹¼çºŒå­¸ç¿’ï¼';
        clearInterval(this.breakTimer);
    }

    startLongBreak() {
        this.isLongBreak = true;
        this.longBreakTime = 1200; // 20åˆ†é˜
        this.pause();
        this.statusEl.textContent = 'é–‹å§‹20åˆ†é˜é•·ä¼‘æ¯...';

        this.breakTimer = setInterval(() => {
            this.longBreakTime--;
            this.updateDisplay();

            if (this.longBreakTime <= 0) {
                this.endLongBreak();
            }
        }, 1000);
    }

    endLongBreak() {
        this.isLongBreak = false;
        this.statusEl.textContent = 'é•·ä¼‘æ¯çµæŸï¼Œå¯ä»¥ç¹¼çºŒå­¸ç¿’ï¼';
        clearInterval(this.breakTimer);
    }

    showRandomQuote() {
        this.currentQuoteIndex = Math.floor(Math.random() * this.quotes.length);
        this.quoteTextEl.textContent = this.quotes[this.currentQuoteIndex];
    }

    updateDisplay() {
        // æ›´æ–°å­¸ç¿’æ™‚é–“é¡¯ç¤º
        this.studyTimeEl.textContent = this.formatTime(this.studyTime);

        // æ›´æ–°ä¸‹æ¬¡éŸ¿éˆ´å€’æ•¸
        if (this.nextAlarmTime > 0) {
            this.nextAlarmEl.textContent = this.formatMinuteSecond(this.nextAlarmTime);
        } else {
            this.nextAlarmEl.textContent = '00:00';
        }

        // æ›´æ–°çŸ­ä¼‘æ¯å€’æ•¸
        if (this.isShortBreak) {
            this.shortBreakEl.textContent = this.shortBreakTime + 'ç§’';
        } else {
            this.shortBreakEl.textContent = '--';
        }

        // æ›´æ–°é•·ä¼‘æ¯å€’æ•¸
        if (this.isLongBreak) {
            this.longBreakEl.textContent = this.formatMinuteSecond(this.longBreakTime);
        } else {
            this.longBreakEl.textContent = '--:--';
        }
    }

    updateProgressBars() {
        // æ›´æ–°éŸ¿éˆ´é€²åº¦æ¢
        if (this.maxAlarmTime > 0) {
            const alarmProgress = ((this.maxAlarmTime - this.nextAlarmTime) / this.maxAlarmTime) * 100;
            this.alarmProgressEl.style.width = Math.max(0, Math.min(100, alarmProgress)) + '%';
        }

        // æ›´æ–°é•·ä¼‘æ¯é€²åº¦æ¢
        const studyMinutes = Math.floor(this.studyTime / 60);
        const longBreakProgress = (studyMinutes % 90) / 90 * 100;
        this.longBreakProgressEl.style.width = longBreakProgress + '%';
        this.longBreakTextEl.textContent = `${studyMinutes % 90}/90 åˆ†é˜`;
    }

    formatTime(seconds) {
        const hours = Math.floor(seconds / 3600);
        const minutes = Math.floor((seconds % 3600) / 60);
        const secs = seconds % 60;
        return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    formatMinuteSecond(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = seconds % 60;
        return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    playAlarmSound() {
        const soundType = this.soundSelect.value;

        if (soundType === 'custom' && this.customAudio) {
            this.customAudio.play().catch(e => console.log('ç„¡æ³•æ’­æ”¾è‡ªå®šç¾©éŸ³æ•ˆ:', e));
        } else {
            // ä½¿ç”¨Web Audio APIç”¢ç”Ÿä¸åŒé¡å‹çš„è²éŸ³
            if ('AudioContext' in window || 'webkitAudioContext' in window) {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                const audioContext = new AudioContext();

                this.playBuiltInSound(audioContext, soundType);
            }
        }
    }

    playBuiltInSound(audioContext, soundType) {
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        switch (soundType) {
            case 'bell':
                // éˆ´è²æ•ˆæœ
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
                oscillator.frequency.exponentialRampToValueAtTime(800, audioContext.currentTime + 0.2);
                break;
            case 'chime':
                // é¢¨éˆ´è²æ•ˆæœ
                oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(500, audioContext.currentTime + 0.5);
                break;
            default: // beep
                oscillator.frequency.value = 800;
                break;
        }

        oscillator.type = 'sine';
        gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.5);
    }
}

// åˆå§‹åŒ–è¨ˆæ™‚å™¨
document.addEventListener('DOMContentLoaded', () => {
    new StudyTimer();
});
